<!DOCTYPE html>
<!-- saved from url=(0054)/hero.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>keg.io v2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Garrett" >

    <!-- Le styles -->
  <link href='http://fonts.googleapis.com/css?family=Cabin+Sketch:bold' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Annie+Use+Your+Telescope' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="css/style_old2new.css" media="screen" />
  <!-- <link rel="stylesheet" href="/css/forms.css"> -->


    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">

    <script src="https://www.google.com/jsapi?key=ABQIAAAA-hloRCoCScu-_bN2fSn1sRR4EqRj3RNZnoYuzojShxUjcPQKRRTnvFxdzgemDA4fIDmabxpsMJwNew" type="text/javascript">
</script>
<script src="https://www.google.com/uds/?file=visualization&v=1&packages=gauge" language="javascript"></script>
<script type="text/javascript" >
google.load("visualization", "1", {packages:["corechart"]});
</script>
  </head>

  <body>

		<div class="row">
			<div class="span4">
			<h2>Current Keg</h2>
			<span id="currentKegName">Mannys Pale Ale</span>
			<img id="currentKegImage" />
			<div id="flow_chart" ></div>
			<div id="temp_chart" ></div>
			<div id="beer_chart" ></div>
			</div>

			<div class="span8">

				<h2>Current Drinker</h2>
				<span id="currentDrinkerName">Travis Johnson</span>
				<img id="currentDrinkerImage" />
			</div>
		</div>


    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="/js/jquery-ui-1.8.10.custom.min.js"></script>
<!-- <script type="text/javascript" src="/js/socket.io.js"></script> -->
<!-- <script src="http://localhost:8888/socket.io/socket.io.js"></script> -->
<script src="/socket.io/socket.io.js"></script>

<script type="text/javascript">
    document.write('<scr'+'ipt type="text/javasc'+'ript" src="/js/keg.io.client.js?'+Math.random()+'" ></scr'+'ipt>');
    </script>
	<script type="text/javascript" >
	$(document).ready(function(){
		isEditTimeout = null;
		reloadAttempt = 0;

    var socket = io.connect('http://localhost:8081');

    socket.on('connect', function () {
      var kegerator_id = 2222; // the kegerator you want to "listen to"
      socket.emit('attach', kegerator_id);
      socket.on('attached', function () {
        console.log('attached to ' + kegerator_id + '!');
      });
    });

    socket.on('hello', function (data) {
        console.log(data);
    });

    socket.on('scan', function (data) {
        console.log("scan event from server:");
        console.log(data);
    });

    socket.on('flow', function (data) {
        console.log("flow event from server:");
        console.log(data);
    });

    socket.on('pour', function (data) {
        console.log("pour event from server:");
        console.log(data);
    });

		kegio.getLastDrinkers(function(drinkers){
			var current = drinkers[0];
			//$('#currentDrinkerImage').attr("src","http://www.gravatar.com/avatar/" + current.hash + "?s=250&d=mm");
			$('#currentDrinkerName').text(current.first_name + (current.nickname!=''?' "' + current.nickname + '" ':' ')+current.last_name);
		});

		kegio.getKegs(function(kegs){
			var current = kegs[0];
			$('#currentKegName').text(current.beer + ' ' + current.beer_style);
			$('#currentKegImage').attr('src',current.image_path);
		});

	});
</script>


</body></html>